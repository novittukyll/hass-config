action: fire-dom-event
browser_mod:
  command: popup
  title: Laitteet
  style:
    $: |
      .mdc-dialog .mdc-dialog__surface {
        background-color: var(--primary-background-color) !important;
      }
    .: |
      :host .content {
        width: calc(390px + 390px);
        max-width: 90vw;
      }
    layout-card:
      $grid-layout$:
        .: |
          #root {
            margin: 0 0 1rem 0 !important;
          }

  card:
    type: custom:layout-card
    layout_type: custom:grid-layout
    layout:
      grid-template-columns: 1fr 1fr
      grid-template-rows: max-content
      grid-template-areas: |
        "washing dryer"
        "graph1 graph2"
      place-items: start stretch
    cards:
      - type: vertical-stack
        view_layout:
          grid-area: washing
        cards:
          - type: entities
            card_mod:
              !include ../../ui/styles/entities-card.yaml
            title: Pesukone
            show_header_toggle: false
            entities:
              - entity: sensor.washing_machine_status
                name: Tila
              - entity: sensor.washing_machine_water_consumption
                name: Vedenkulutus
              - entity: sensor.washing_machine_energy
                name: Sähkönkulutus
              - entity: sensor.washing_machine_program_id
                name: Ohjelma
              - entity: sensor.washing_machine_program_phase
                name: Ohjelman vaihe
              - entity: sensor.washing_machine_remaining_time
                name: Jäljellä oleva aika
              - entity: sensor.washing_machine_target_temperature_0
                name: Valittu lämpötila
              - type: section

      - type: vertical-stack
        view_layout:
          grid-area: dryer
        cards:
          - type: entities
            card_mod:
              !include ../../ui/styles/entities-card.yaml
            title: Kuivausrumpu
            show_header_toggle: false
            entities:
              - entity: sensor.tumble_dryer_status
                name: Tila
              - entity: sensor.tumble_dryer_energy
                name: Sähkönkulutus
              - entity: sensor.tumble_dryer_program_id
                name: Ohjelma
              - entity: sensor.tumble_dryer_program_phase
                name: Ohjelman vaihe
              - entity: sensor.tumble_dryer_drying_step
                name: Drying step
              - entity: sensor.tumble_dryer_remaining_time
                name: Jäljellä oleva aika
              - entity: sensor.washing_machine_target_temperature_0
                name: Valittu lämpötila
              - type: section

      - type: custom:apexcharts-card
        view_layout:
          grid-area: graph1
          place-self: end stretch
        card_mod:
          !include ../../ui/styles/no-card.yaml
        graph_span: 2d
        config_templates:
          - base
        apex_config:
          yaxis:
            - show: true
              forceNiceScale: true
              decimalsInFloat: 1
              axisBorder:
                show: true
                color: rgba(var(--primary-text-color-rgb), 0.4)
                height: 1
            - show: true
              decimalsInFloat: 0
              opposite: true
              forceNiceScale: true
        header:
          title: Kulutukset
        series:
          - entity: sensor.washing_machine_energy
            name: Sähkö
            color: yellow
          - entity: sensor.washing_machine_water_consumption
            name: Vesi
            color: dodgerblue

      - type: custom:apexcharts-card
        view_layout:
          grid-area: graph2
          place-self: end stretch
        card_mod:
          !include ../../ui/styles/no-card.yaml
        graph_span: 2d
        config_templates:
          - base
        apex_config:
          yaxis:
            - show: true
              forceNiceScale: true
              decimalsInFloat: 1
              axisBorder:
                show: true
                color: rgba(var(--primary-text-color-rgb), 0.4)
                height: 1
        header:
          title: Kulutukset
        series:
          - entity: sensor.tumble_dryer_energy
            name: Sähkö
            color: yellow
