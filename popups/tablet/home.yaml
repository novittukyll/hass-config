action: fire-dom-event
browser_mod:
  command: popup
  title: Koti
  style:
    $: |
      .mdc-dialog .mdc-dialog__surface {
        background-color: var(--primary-background-color) !important;
      }
    .: |
      :host .content {
        width: calc(390px + 390px + 390px);
        max-width: 90vw;
      }
    layout-card:
      $grid-layout$:
        .: |
          #root {
            margin: 0 !important;
          }

  card:
    type: custom:layout-card
    layout_type: custom:grid-layout
    layout:
      grid-template-columns: 1fr 1fr 1fr
      grid-template-rows: fit-content(100%) 1fr
      grid-template-areas: |
        "home electricity sauna"
        "home graph1 graph2"
      place-items: start stretch
    cards:
      - type: vertical-stack
        view_layout:
          grid-area: home
          place-self: stretch stretch
        cards:
          - type: entities
            card_mod:
              !include ../../ui/styles/entities-card.yaml
            title: Koti
            show_header_toggle: false
            entities:
              - entity: sensor.home_state
                name: Tila
              - entity: lock.ulko_ovi
                name: Ulko-ovi
              - entity: binary_sensor.mqtt_garage_door
              - entity: input_boolean.on_vacation
              - type: section
                label: Automaatiot
              - entity: automation.liike_eteisessa
              - entity: automation.aloita_iltarutiinit
              - entity: automation.start_go_to_sleep
              - entity: automation.aloita_nukkumaanmeno_viikonloppuisin
                name: Aloita nukkumaanmeno vkl
              - entity: automation.herata_arkisin
              - entity: automation.valot_paalle_yolla
              - type: section

      - type: vertical-stack
        view_layout:
          grid-area: electricity
        cards:
          - type: entities
            title: Sähkönkulutus
            card_mod:
              !include ../../ui/styles/entities-card.yaml
            show_header_toggle: false
            entities:
              - entity: sensor.mqtt_electricity_consumption_daily_updated
                name: Päivitetty
              - entity: sensor.mqtt_electricity_consumption_daily
                name: Päivän kulutus
              - entity: sensor.mqtt_electricity_consumption_monthly
                name: Kuukauden kulutus
              - entity: sensor.mqtt_electricity_consumption_monthly_prediction
                name: Kuukauden ennuste
              - type: section
      - type: custom:apexcharts-card
        view_layout:
          grid-area: graph1
          place-self: end stretch
        card_mod:
          !include ../../ui/styles/no-card.yaml
        config_templates:
          - sensor_electricity_consumption_daily

      - type: vertical-stack
        view_layout:
          grid-area: sauna
        cards:
          - type: entities
            card_mod:
              !include ../../ui/styles/entities-card.yaml
            title: Sauna
            show_header_toggle: false
            entities:
              - entity: sensor.sauna_state
                name: Tila
              - type: attribute
                entity: automation.sauna_lammin
                attribute: last_triggered
                name: Viimeksi päällä
                format: relative
              - entity: sensor.mqtt_sauna_temperature
                name: Lämpötila
              - entity: sensor.mqtt_sauna_humidity
                name: Kosteus
              - type: section

      - type: custom:apexcharts-card
        view_layout:
          grid-area: graph2
          place-self: end stretch
        card_mod:
          !include ../../ui/styles/no-card.yaml
        config_templates:
          - sensor_generic_dual
        header:
          title: Saunan lämpötila ja kosteus
        series:
          - entity: sensor.mqtt_sauna_temperature
            name: Lämpötila
            color: green
          - entity: sensor.mqtt_sauna_humidity
            name: Kosteus
            color: dodgerblue
