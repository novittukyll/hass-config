action: fire-dom-event
browser_mod:
  command: popup
  title: Autotalli
  style:
    $: |
      .mdc-dialog .mdc-dialog__surface {
        background-color: var(--primary-background-color) !important;
      }
    hui-vertical-stack-card:
      $: |
        #root {
          padding: 0 1rem 0 1rem;
        }
  card:
    type: vertical-stack
    cards:
      - type: custom:button-card
        template: subtitle
        name: Tila

      - type: horizontal-stack
        cards:
          - type: custom:button-card
            template: compact_info
            entity: binary_sensor.mqtt_garage_door

          - type: custom:button-card
            template: compact_info
            entity: switch.tplink_hs110_2
            name: Ilmankuivain

          - type: custom:button-card
            template: compact_info
            entity: binary_sensor.garage_dehumidifier
            name: Kuivaus käynnissä

      - type: horizontal-stack
        cards:
          - type: custom:button-card
            template: sensor_graph
            entity: sensor.netatmo_koti_olohuone_autotalli_temperature
            variables:
              name_override: Lämpötila
              color_thresholds:
                - value: 10
                  color: "#1E90FF"
                - value: 13
                  color: "#008000"
                - value: 16
                  color: "#FFFF00"
                - value: 20
                  color: "#FF0000"

          - type: custom:button-card
            template: sensor_graph
            entity: sensor.netatmo_koti_olohuone_autotalli_humidity
            variables:
              name_override: Kosteus

          - type: custom:button-card
            template: sensor_graph
            entity: sensor.netatmo_koti_olohuone_autotalli_co2
            variables:
              name_override: CO2

      - type: custom:button-card
        template: subtitle
        name: Automaatiot

      - type: entities
        entities:
          - entity: automation.sammuta_ilmankuivain
            secondary_info: last-triggered

          - entity: automation.kaynnista_ilmankuivain
            secondary_info: last-triggered

          - entity: automation.tyhjenna_ilmankuivain
            secondary_info: last-triggered