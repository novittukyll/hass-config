---
action: fire-dom-event
browser_mod:
  service: browser_mod.popup
  data:
    title: S채채d채 valaistusta
    style: |
      --popup-max-width: 40vw;
      --mdc-dialog-max-height: 90vh;
    card_mod:
      style:
        ha-dialog$: |
          @media (max-width: 450px), (max-height: 500px) {
            div.mdc-dialog div.mdc-dialog__container {
              --mdc-dialog-min-height: 100vh;
              --mdc-dialog-min-width: 100vw;
              --mdc-dialog-max-height: 100vh;
            }
          }
        hui-vertical-stack-card:
          $: |
            #root {
              padding: 0 1rem 0 1rem;
            }
            button-card {
              padding: 0 20px 0 20px;
            }
            .text-content {
              text-align: start !important;
            }
          $hui-entities-card:
            $: |
              ha-card {
                padding: 0 20px 0 20px;
                box-shadow: none;
                background-color: transparent;
              }
              div#states.card-content {
                padding: 0;
              }
          $button-card:
            $hui-horizontal-stack-card:
              $: |
                #root {
                  display: flex;
                  justify-content: center;
                }
            $hui-vertical-stack-card:
              $hui-horizontal-stack-card:
                $: |
                  #root {
                    display: flex;
                    justify-content: center;
                  }
            $slider-entity-row:
              $hui-generic-entity-row:
                $: |
                  div.text-content {
                    text-align: start;
                  }
    content:
      type: vertical-stack
      cards:
        - type: entities
          entities:
            - entity: "[[[ return entity.entity_id ]]]"
              secondary_info: last-changed

        - type: custom:button-card
          template: conditional
          variables:
            show: |
              [[[ return entity.attributes.supported_features > 0 ]]]
            card:
              type: custom:slider-entity-row
              entity: |
                [[[ return entity.entity_id ]]]
              name: Kirkkaus
              icon: mdi:weather-sunny
          styles:
            card:
              - height: 5rem
              - overflow: visible

        - type: custom:button-card
          template: conditional
          variables:
            show: |
              [[[ return entity.attributes.supported_features > 0 ]]]
            card:
              type: horizontal-stack
              cards:
                - type: custom:button-card
                  template: scene_icon_temperature
                  entity: "[[[ return entity.entity_id ]]]"
                  name: Relax
                  variables:
                    color_rgb: 255, 148, 43
                    color_temperature: 2800
                    brightness: 60

                - type: custom:button-card
                  template: scene_icon_temperature
                  entity: "[[[ return entity.entity_id ]]]"
                  name: Luku
                  variables:
                    color_rgb: 255, 174, 103
                    color_temperature: 3500
                    brightness: 100

                - type: custom:button-card
                  template: scene_icon_temperature
                  entity: "[[[ return entity.entity_id ]]]"
                  name: Keskity
                  variables:
                    color_rgb: 255, 214, 181
                    color_temperature: 4200
                    brightness: 100

                - type: custom:button-card
                  template: scene_icon_temperature
                  entity: "[[[ return entity.entity_id ]]]"
                  name: Viile채
                  variables:
                    color_rgb: 255, 252, 247
                    color_temperature: 6000
                    brightness: 100


        - type: custom:button-card
          template: conditional
          variables:
            show: |
              [[[ return entity.attributes.supported_features > 0 ]]]
            card:
              type: horizontal-stack
              cards:
                - type: custom:button-card
                  template: scene_icon_brightness
                  entity: "[[[ return entity.entity_id ]]]"
                  name: 80%
                  variables:
                    brightness: 80

                - type: custom:button-card
                  template: scene_icon_brightness
                  entity: "[[[ return entity.entity_id ]]]"
                  name: 60%
                  variables:
                    brightness: 60

                - type: custom:button-card
                  template: scene_icon_brightness
                  entity: "[[[ return entity.entity_id ]]]"
                  name: 40%
                  variables:
                    brightness: 40

                - type: custom:button-card
                  template: scene_icon_brightness
                  entity: "[[[ return entity.entity_id ]]]"
                  name: 20%
                  variables:
                    brightness: 20

        - type: custom:button-card
          template: conditional
          variables:
            show: |
              [[[ return entity.attributes.supported_features > 0 && variables.popup_show_predefined_colors ]]]
            card:
              type: vertical-stack
              cards:
                - type: horizontal-stack
                  cards:
                    - type: custom:button-card
                      template: scene_icon_rgb
                      entity: "[[[ return entity.entity_id ]]]"
                      name: Red
                      variables:
                        color_rgb: 255, 0, 0
                        brightness: 100

                    - type: custom:button-card
                      template: scene_icon_rgb
                      entity: "[[[ return entity.entity_id ]]]"
                      name: Green
                      variables:
                        color_rgb: 0, 255, 0
                        brightness: 100

                    - type: custom:button-card
                      template: scene_icon_rgb
                      entity: "[[[ return entity.entity_id ]]]"
                      name: Blue
                      variables:
                        color_rgb: 0, 0, 255
                        brightness: 100

                    - type: custom:button-card
                      template: scene_icon_rgb
                      entity: "[[[ return entity.entity_id ]]]"
                      name: Yellow
                      variables:
                        color_rgb: 255, 255, 0
                        brightness: 100

        - type: custom:button-card
          template: conditional
          variables:
            show: |
              [[[ return variables.popup_show_colorwheel ]]]
            card:
              type: custom:light-entity-card
              card_mod:
                style: |
                  ha-card {
                    box-shadow: none;
                    background-color: transparent;
                    margin-bottom: 1rem;
                  }
                  .light-entity-card__header {
                    padding: 0 20px 0 20px;
                  }
                  .light-entity-card-sliders {
                    padding: 0 20px 0 20px;
                  }
              entity: "[[[ return entity.entity_id ]]]"
              brightness: false
              color_temp: false
              white_value: false
              full_width_sliders: true
              hide_header: true
              show_slider_percent: false
              smooth_color_wheel: true
              persist_features: true
              consolidate_entities: true
              child_card: true
              effects_list: false

        - type: custom:button-card
          template: conditional
          variables:
            show: |
              [[[ return Boolean(entity.attributes.entity_id) ]]]
            card:
              type: vertical-stack
              cards: |
                [[[
                  const cards = []
                  const ids = [].concat(entity.attributes.entity_id)

                  for (let i = 0; i < ids.length; i++) {
                      cards.push({
                          "type": "tile",
                          "entity": ids[i],
                          "features": [
                            { type: "light-brightness" },
                          ],
                          "card_mod": {
                            "class": "swiper-no-swiping",
                            "style": "ha-card { margin-bottom: 1rem; text-align: start }",
                          },
                      });
                  }

                  return cards;
                ]]]
