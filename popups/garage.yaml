action: fire-dom-event
browser_mod:
  command: popup
  title: Autotalli
  style:
    $: |
      .mdc-dialog .mdc-dialog__surface {
        background-color: var(--primary-background-color) !important;
      }
  card:
    type: custom:mod-card
    card_mod:
      style: |
        ha-card {
          padding: 16px
        }
        ha-card.type-custom-mod-card {
          background-color: var(--primary-background-color);
        }
    card:
      type: vertical-stack
      cards:
        - type: custom:button-card
          template: card_title
          label: Tila
        - type: horizontal-stack
          cards:
            - type: custom:button-card
              template: card_binary_sensor
              entity: binary_sensor.mqtt_garage_door
              name: | 
                [[[
                  if (entity.state == 'off') {
                    return 'Ovi suljettu'
                  } else {
                    return 'Ovi auki'
                  }
                ]]]
              show_last_changed: true
            - type: custom:button-card
              template: card_generic_icon_small
              entity: sensor.netatmo_koti_olohuone_autotalli_co2
              name: CO2
              icon: mdi:molecule-co2
              styles:
                icon:
                  - color: "green"
        - type: horizontal-stack
          cards:
            - type: custom:mini-graph-card
              style: |
                ha-card {
                  border-radius: 20px;
                }
              entities:
                - entity: sensor.netatmo_koti_olohuone_autotalli_temperature
              name: Lämpötila
              decimals: 1
              hours_to_show: 24
              points_per_hour: 8
              color_thresholds:
                - value: 10
                  color: "#1E90FF"
                - value: 13
                  color: "#008000"
                - value: 16
                  color: "#FFFF00"
                - value: 20
                  color: "#FF0000"
              show:
                icon: false
            - type: custom:mini-graph-card
              style: |
                ha-card {
                  border-radius: 20px;
                }
              entities:
                - entity: sensor.netatmo_koti_olohuone_autotalli_humidity
              name: Kosteus
              decimals: 1
              hours_to_show: 24
              points_per_hour: 8
              show:
                icon: false
        - type: custom:button-card
          template: card_title
          label: Ilmankuivain
        - type: entities
          style: |
            ha-card {
              border-radius: 20px
            }
          entities:
            - entity: switch.tplink_hs110_2
              name: Päällä
            - entity: binary_sensor.garage_dehumidifier
              name: Tämänhetkinen tila
              secondary_info: last-changed
        - type: custom:button-card
          template: card_title
          label: Automaatiot
        - type: entities
          style: |
            ha-card {
              border-radius: 20px
            }     
          entities:
            - entity: automation.sammuta_ilmankuivain
              secondary_info: last-triggered
            - entity: automation.kaynnista_ilmankuivain
              secondary_info: last-triggered
            - entity: automation.tyhjenna_ilmankuivain
              secondary_info: last-triggered